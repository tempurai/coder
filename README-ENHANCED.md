# Coder AI CLI - 智能代码助手\n\n一个基于AI的命令行代码助手，具有现代化的交互界面和强大的文件操作功能。\n\n## ✨ 主要特性\n\n### 🔥 现代化体验\n- **基于Ink框架的美观CLI界面**\n- **流式输出** - 打字机效果的实时响应\n- **智能历史导航** - 使用↑↓箭头浏览命令历史\n- **彩色diff显示** - 清晰的代码变更预览\n- **交互式确认** - 修改文件前的安全确认\n\n### 🛠️ 强大功能\n- **增强文件操作** - 支持diff和直接模式\n- **检查点系统** - 自动备份和恢复\n- **配置管理** - 用户友好的配置文件\n- **多模式支持** - 交互式或命令行模式\n- **项目感知** - 智能识别项目结构\n\n### 🎨 用户体验\n- **预览优先** - 修改前总是显示预览\n- **安全操作** - 危险操作前创建备份\n- **智能错误处理** - 友好的错误信息和建议\n- **实时状态显示** - 清晰的加载和进度指示\n\n## 🚀 快速开始\n\n### 安装依赖\n```bash\npnpm install\n```\n\n### 配置API Key\n设置你的OpenAI API Key（二选一）：\n\n**方法1: 环境变量**\n```bash\nexport OPENAI_API_KEY=\"your-api-key-here\"\n```\n\n**方法2: 配置文件**\n启动程序后，编辑 `~/.coder-ai/config.json`：\n```json\n{\n  \"apiKey\": \"your-api-key-here\",\n  \"model\": \"gpt-4o-mini\",\n  \"temperature\": 0.3\n}\n```\n\n### 启动程序\n```bash\n# 启动现代化CLI界面\nnpm start\n\n# 或者直接提问\nnpm start \"帮我分析这个项目的结构\"\n```\n\n## 📋 使用方法\n\n### 交互式模式\n```bash\nnpm start\n```\n\n启动后你可以：\n- 直接输入问题或命令\n- 使用 ↑↓ 箭头浏览历史命令\n- 输入 `config` 查看当前配置\n- 输入 `clear` 清空对话历史\n- 输入 `exit` 或按 Ctrl+C 退出\n\n### 命令行模式\n```bash\n# 直接提问\nnpm start \"分析这个函数的复杂度\"\n\n# 查看配置\nnpm run config:show\n\n# 重置配置\nnpm run config:reset\n```\n\n### 文件操作流程\n1. **提出修改请求** - 告诉AI你想要什么改动\n2. **查看预览** - AI会显示详细的变更预览\n3. **确认应用** - 选择 `(a)pprove` 应用更改\n4. **其他选项**:\n   - `(e)dit` - 修改请求\n   - `(s)how-full` - 显示完整文件内容\n   - `(d)eny` - 取消更改\n\n## ⚙️ 配置文件\n\n配置文件位置：`~/.coder-ai/config.json`\n\n### 主要配置项\n```json\n{\n  \"model\": \"gpt-4o-mini\",        // AI模型\n  \"temperature\": 0.3,            // 创造性(0-2)\n  \"apiKey\": \"sk-...\",            // API密钥\n  \"tools\": {\n    \"shellExecutor\": {\n      \"defaultTimeout\": 30000,    // Shell命令超时\n      \"allowDangerousCommands\": false\n    },\n    \"checkpoint\": {\n      \"maxCheckpoints\": 10,       // 最大检查点数\n      \"autoBackup\": true         // 自动备份\n    }\n  },\n  \"ui\": {\n    \"theme\": \"default\",          // UI主题\n    \"showTimestamps\": false,     // 显示时间戳\n    \"maxHistoryLength\": 50       // 最大历史记录\n  }\n}\n```\n\n## 🔧 开发模式\n\n### 启动开发环境\n```bash\nnpm run dev\n```\n\n### 构建项目\n```bash\nnpm run build\n```\n\n### 监听模式构建\n```bash\nnpm run build:watch\n```\n\n## 📚 命令参考\n\n### npm 脚本\n- `npm start` - 启动增强CLI\n- `npm run start:legacy` - 启动传统CLI\n- `npm run gui` - 启动Web界面\n- `npm run config:show` - 显示配置\n- `npm run config:reset` - 重置配置\n- `npm run health` - 健康检查\n\n### 交互式命令\n- `exit`, `quit`, `q` - 退出程序\n- `clear` - 清空历史记录  \n- `config` - 显示配置信息\n- `↑↓` 箭头键 - 浏览命令历史\n- `Ctrl+C` - 强制退出\n- `Ctrl+L` - 清空屏幕\n\n## 🛡️ 安全特性\n\n### 文件操作安全\n- **预览优先** - 所有修改都先显示预览\n- **用户确认** - 需要明确确认才执行\n- **自动备份** - 修改前自动创建备份\n- **检查点系统** - 批量操作前创建快照\n\n### 命令执行安全\n- **超时保护** - 防止命令无限运行\n- **危险命令检测** - 可配置的危险命令拦截\n- **权限检查** - 执行前检查必要权限\n\n## 🎯 最佳实践\n\n### 日常使用\n1. **设置合适的配置** - 根据需求调整超时和备份设置\n2. **使用预览功能** - 修改文件前总是查看预览\n3. **定期清理检查点** - 避免占用过多磁盘空间\n4. **利用历史功能** - 使用箭头键快速重复命令\n\n### 项目配置\n可以在配置文件中为不同项目设置特定参数：\n```json\n{\n  \"projects\": {\n    \"my-react-app\": {\n      \"path\": \"/path/to/project\",\n      \"defaultInstructions\": \"这是一个React TypeScript项目\",\n      \"excludePatterns\": [\"node_modules\", \"dist\"]\n    }\n  }\n}\n```\n\n## 🐛 故障排除\n\n### 常见问题\n\n**API Key错误**\n```bash\n# 检查环境变量\necho $OPENAI_API_KEY\n\n# 检查配置文件\nnpm run config:show\n```\n\n**启动失败**\n```bash\n# 健康检查\nnpm run health\n\n# 重置配置\nnpm run config:reset\n```\n\n**文件权限问题**\n```bash\n# 检查配置目录权限\nls -la ~/.coder-ai/\n\n# 修复权限\nchmod 755 ~/.coder-ai/\n```\n\n## 🔄 版本更新\n\n### 当前版本：v1.0.0\n\n### 更新日志\n- ✅ Ink框架现代化界面\n- ✅ 流式输出和打字机效果\n- ✅ 增强的文件操作系统\n- ✅ 检查点备份机制\n- ✅ 配置文件管理\n- ✅ 命令历史导航\n- ✅ 彩色diff显示\n- ✅ 交互式确认流程\n\n## 🤝 贡献\n\n欢迎提交Issue和Pull Request！\n\n## 📄 许可证\n\nISC License\n\n---\n\n💡 **提示**: 首次使用建议运行 `npm start` 进入交互模式，体验完整功能！